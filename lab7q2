#include <lpc17xx.h>

int i,j,x;

int main(){
  LPC_PINCON->PINSEL0=0;
	LPC_GPIO0->FIODIR =0XFF<<4;
	LPC_PINCON= PINSEL4=0;
	LPC_GPIO2->FIODIR =~(1<<12);
	

    while (1) {
        // Read SW2 state (1 = pressed, 0 = released)
        x = (LPC_GPIO2->FIOPIN >> 12) & 1;

        // Display current count on LEDs
        LPC_GPIO0->FIOCLR = 0x00000FF0;
        LPC_GPIO0->FIOSET = (i << 4);

        // Change counter based on switch state
        if (x == 1) {
            // Switch pressed ? count up
            i++;
            if (i > 255) i = 255;   // stay at max
        } else {
            // Switch released ? count down
            if (i > 0) i--;
            else i = 0;             // stay at min
        }

        // Small delay
        for (j = 0; j < 50000; j++);
    }
	}
